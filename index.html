<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Echo - Webchat App</title>
    <style>
      :root {
        --body-bg: #f4f7fb;
        --body-text: #222;
        --header-bg: #ffffff;
        --header-text: #0078ff;
        --nav-link: #333;
        --nav-link-hover: #0078ff;
        --main-bg: #f8f9fb;
        --sidebar-bg: #ffffff;
        --sidebar-border: #e0e0e0;
        --chat-list-bg: #f1f5f9;
        --chat-list-hover: #e5f0ff;
        --chat-list-text: #222;
        --chat-area-bg: #ffffff;
        --chat-area-border: #e0e0e0;
        --chat-header-bg: rgba(227, 228, 229, 0.75);
        --chat-info-text: #0078ff;
        --chat-info-small: #666;
        --back-btn-bg: #0078ff;
        --back-btn-text: #fff;
        --messages-bg: #f5f7fa;
        --message-bg: #e9f2ff;
        --message-text: #222;
        --message-sent-bg: #0078ff;
        --message-sent-text: #fff;
        --input-bg: #ffffff;
        --input-border: #ccc;
        --input-field-bg: #f7f9fb;
        --input-button-bg: #0078ff;
        --input-button-hover: #0065d1;
        --input-button-text: #fff;
      }

      .dark-theme {
        --body-bg: #121212;
        --body-text: #f1f1f1;
        --header-bg: #1e1e1e;
        --header-text: #bb86fc;
        --nav-link: #f1f1f1;
        --nav-link-hover: #bb86fc;
        --main-bg: #121212;
        --sidebar-bg: #1a1a1a;
        --sidebar-border: #333;
        --chat-list-bg: #1f1f1f;
        --chat-list-hover: #333;
        --chat-list-text: #f1f1f1;
        --chat-area-bg: #1a1a1a;
        --chat-area-border: #333;
        --chat-header-bg: rgba(60, 60, 60, 0.75);
        --chat-info-text: #bb86fc;
        --chat-info-small: #ccc;
        --back-btn-bg: #bb86fc;
        --back-btn-text: #121212;
        --messages-bg: #161616;
        --message-bg: #333;
        --message-text: #f1f1f1;
        --message-sent-bg: #bb86fc;
        --message-sent-text: #121212;
        --input-bg: #1a1a1a;
        --input-border: #555;
        --input-field-bg: #121212;
        --input-button-bg: #bb86fc;
        --input-button-hover: #9a5ce0;
        --input-button-text: #121212;
      }

      /* ===== Base ===== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      body {
        background: var(--body-bg);
        color: var(--body-text);
        height: 100vh;
        display: flex;
        flex-direction: column;
      }

      header {
        background: var(--header-bg);
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
        border-bottom: 1px solid var(--sidebar-border);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
      }

      header h1 {
        font-size: 1.5rem;
        color: var(--header-text);
        font-weight: 600;
      }

      nav a {
        color: var(--nav-link);
        text-decoration: none;
        margin: 0 1rem;
        transition: color 0.3s;
      }

      nav a:hover {
        color: var(--nav-link-hover);
      }

      main {
        flex: 1;
        display: flex;
        background: var(--main-bg);
      }

      .sidebar {
        flex: 1;
        min-width: 250px;
        max-width: 300px;
        background: var(--sidebar-bg);
        border-right: 1px solid var(--sidebar-border);
        padding: 1rem;
        overflow-y: auto;
      }

      .chat-list {
        list-style: none;
      }

      .chat-list li {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 0.8rem;
        margin-bottom: 0.6rem;
        background: var(--chat-list-bg);
        border-radius: 10px;
        cursor: pointer;
        transition: background 0.3s;
        color: var(--chat-list-text);
      }

      .chat-list li:hover {
        background: var(--chat-list-hover);
      }

      .chat-list img {
        width: 42px;
        height: 42px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--header-text);
      }

      .chat-list span {
        font-weight: 500;
        color: var(--chat-list-text);
      }

      .chat-area {
        flex: 3;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        background: var(--chat-area-bg);
        border-radius: 10px;
        margin: 1rem;
        border: 1px solid var(--chat-area-border);
        overflow: hidden;
      }

      .chat-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.8rem 1rem;
        background: var(--chat-header-bg);
        border-bottom: 1px solid var(--chat-area-border);
      }

      .chat-info img {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--header-text);
      }

      .chat-info strong {
        font-size: 1rem;
        color: var(--chat-info-text);
      }

      .chat-info small {
        display: block;
        font-size: 0.75rem;
        color: var(--chat-info-small);
      }

      .back-btn {
        display: none;
        background: var(--back-btn-bg);
        color: var(--back-btn-text);
        border: none;
        border-radius: 6px;
        padding: 0.4rem 0.8rem;
        cursor: pointer;
      }

      .messages {
        flex: 1;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 0.6rem;
        padding: 1rem;
        background: var(--messages-bg);
      }

      .message {
        max-width: 70%;
        padding: 0.8rem 1rem;
        border-radius: 15px;
        background: var(--message-bg);
        align-self: flex-start;
        color: var(--message-text);
      }

      .message.sent {
        align-self: flex-end;
        background: var(--message-sent-bg);
        color: var(--message-sent-text);
      }

      .input-area {
        display: flex;
        gap: 0.6rem;
        padding: 0.8rem;
        background: var(--input-bg);
        border-top: 1px solid var(--sidebar-border);
      }

      .input-area input {
        flex: 1;
        padding: 0.8rem;
        border: 1px solid var(--input-border);
        border-radius: 10px;
        outline: none;
        background: var(--input-field-bg);
        color: var(--body-text);
      }

      .input-area button {
        background: var(--input-button-bg);
        border: none;
        padding: 0.8rem 1.2rem;
        border-radius: 10px;
        color: var(--input-button-text);
        font-weight: 600;
        cursor: pointer;
      }

      .input-area button:hover {
        background: var(--input-button-hover);
      }

      @media (max-width: 600px) {
        main {
          flex-direction: column;
        }

        .chat-area {
          margin: 0.5rem;
          display: none;
        }

        .chat-area.active {
          display: flex;
        }

        .sidebar {
          max-width: 100%;
        }

        .sidebar.hidden {
          display: none;
        }

        .back-btn {
          display: block;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Echo</h1>
      <nav>
        <a href="index.html">Home</a>
        <a href="profile.html">Profile</a>
        <a href="settings.html">Settings</a>
      </nav>
    </header>

    <main>
      <aside class="sidebar" id="sidebar">
        <ul class="chat-list">
          <li onclick="openChat('Harsh', 'default-image.png')">
            <img src="default-image.png" alt="Harsh" />
            <span>Harsh</span>
          </li>
          <li onclick="openChat('Himanshu', 'default-image.png')">
            <img src="default-image.png" alt="Himanshu" />
            <span>Himanshu</span>
          </li>
          <li onclick="openChat('Hemank', 'default-image.png')">
            <img src="default-image.png" alt="Hemank" />
            <span>Hemank</span>
          </li>
        </ul>
      </aside>

      <section class="chat-area" id="chatArea">
        <div class="chat-header">
          <div class="chat-info">
            <img id="chatImg" src="./default-image.png" alt="User" />
            <div>
              <strong id="chatWith">Select a chat</strong>
              <small id="chatStatus"></small>
            </div>
          </div>
          <button class="back-btn" onclick="closeChat()">‚Üê Back</button>
        </div>

        <div class="messages" id="messages"></div>

        <form class="input-area" onsubmit="sendMessage(event)">
          <input
            type="text"
            id="messageInput"
            placeholder="Type a message..."
          />
          <button type="submit">Send</button>
        </form>
      </section>
    </main>

    <script>
      const messagesContainer = document.getElementById("messages");
      const messageInput = document.getElementById("messageInput");
      const chatArea = document.getElementById("chatArea");
      const sidebar = document.getElementById("sidebar");
      const chatWith = document.getElementById("chatWith");
      const chatStatus = document.getElementById("chatStatus");
      const chatImg = document.getElementById("chatImg");

      let theme = localStorage.getItem("theme");
      if (theme === "dark-theme") {
        document.body.classList.toggle("dark-theme");
      }

      let currentChat = "";

      function openChat(name, img) {
        currentChat = name;
        chatWith.textContent = name;
        chatStatus.textContent = "online";
        chatImg.src = img || "./default-image.png";
        messagesContainer.innerHTML = "";
        if (window.innerWidth <= 600) {
          chatArea.classList.add("active");
          sidebar.classList.add("hidden");
        }
      }

      function sendMessage(e) {
        e.preventDefault();
        const msg = messageInput.value.trim();
        if (!msg) return;

        const div = document.createElement("div");
        div.classList.add("message", "sent");
        div.textContent = msg;
        messagesContainer.appendChild(div);
        messageInput.value = "";
        messagesContainer.scrollTop = messagesContainer.scrollHeight;

        setTimeout(() => {
          const reply = document.createElement("div");
          reply.classList.add("message");
          reply.textContent = "Got it!";
          messagesContainer.appendChild(reply);
          messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }, 800);
      }

      function closeChat() {
        chatArea.classList.remove("active");
        sidebar.classList.remove("hidden");
      }

      window.addEventListener("resize", () => {
        if (window.innerWidth > 600) {
          sidebar.classList.remove("hidden");
          chatArea.classList.remove("active");
        }
      });
    </script>
  </body>
</html>
